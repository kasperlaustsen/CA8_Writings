The purpose of this chapter is to derive a model of the refrigeration system to enable the design of an observer-based controller. The main goal is to capture the dynamics that are important for the box air temperature as this is the primary control objective, while leaving out dynamics that are of little interest or importance from a control perspective.

A modular approach is used, where the components of the refrigeration cycle are modeled separately. Each component has inputs and outputs, where the output of a component is fed into the input of the adjacent component. Some components may also include internal equations which describe some variables or states, which model some relevant dynamics. These dynamics may not be direct outputs of the model. The dynamics in several components are so fast compared to the slower dominant dynamics that they can be considered static (eg. compressor, valves and the flash tank) and are thus modelled by algebraic equations. The dynamics of these components are thus considered not important for the overall control problem.\\

While including the dynamics of the faster parameters would yield a potentially more accurate model, it is unnecessary from a control perspective, as this model is intended for control of the slow dynamics. In addition, the added accuracy will likely be unnoticeable due to various uncertainties in the model. The specific decision of which parameters to model dynamically is heavily inspired by previous work \cite{Sorensen2013}.\\


Although not apparent from the refrigeration cycle, a model of the thermal masses in the trailer box is also made and connected to the refrigeration cycle model.

The most dominant dynamics of a refrigeration trailer are the large thermal capacitances, both in the metal of the heat exchangers (i.e. evaporator and condenser) and in the cargo and trailer box. The component which is modeled in greatest detail is the evaporator, which is critical for efficiency of the refrigeration cycle. \\

The following section presents the component models in detail. The state equations are highlighted in red boxes.